<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Test New Data File - This or That</title>
	<style>
		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			max-width: 1200px;
			margin: 0 auto;
			padding: 20px;
			background: #f5f5f5;
		}

		.header {
			text-align: center;
			margin-bottom: 30px;
		}

		.stats {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 20px;
			margin-bottom: 30px;
		}

		.stat-card {
			background: white;
			padding: 20px;
			border-radius: 12px;
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
			text-align: center;
		}

		.stat-number {
			font-size: 2em;
			font-weight: bold;
			color: #007AFF;
			margin-bottom: 5px;
		}

		.stat-label {
			color: #666;
			font-size: 0.9em;
		}

		.categories {
			background: white;
			padding: 20px;
			border-radius: 12px;
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
			margin-bottom: 30px;
		}

		.category-tag {
			display: inline-block;
			background: #007AFF;
			color: white;
			padding: 5px 12px;
			border-radius: 20px;
			margin: 5px;
			font-size: 0.9em;
		}

		.designs-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
			gap: 20px;
		}

		.design-card {
			background: white;
			border-radius: 12px;
			overflow: hidden;
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
			transition: transform 0.2s;
		}

		.design-card:hover {
			transform: translateY(-5px);
		}

		.design-image {
			width: 100%;
			height: 200px;
			object-fit: cover;
			background: #f0f0f0;
		}

		.design-content {
			padding: 15px;
		}

		.design-name {
			font-weight: bold;
			margin-bottom: 8px;
			font-size: 1.1em;
			line-height: 1.3;
		}

		.design-description {
			color: #666;
			font-size: 0.9em;
			margin-bottom: 10px;
		}

		.design-category {
			display: inline-block;
			background: #e9ecef;
			color: #495057;
			padding: 3px 8px;
			border-radius: 12px;
			font-size: 0.8em;
			margin-bottom: 8px;
		}

		.design-tags {
			display: flex;
			flex-wrap: wrap;
			gap: 5px;
		}

		.design-tag {
			background: #f8f9fa;
			color: #6c757d;
			padding: 2px 6px;
			border-radius: 8px;
			font-size: 0.7em;
		}

		.error {
			background: #fee;
			color: #c33;
			padding: 20px;
			border-radius: 8px;
			margin: 20px 0;
		}

		.loading {
			text-align: center;
			padding: 40px;
			color: #666;
		}

		.image-error {
			background: #f8f9fa;
			color: #6c757d;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 0.9em;
		}
	</style>
</head>

<body>
	<div class="header">
		<h1>üé® This or That - New Data File Test</h1>
		<p>Testing the processed designs from websites-list.json</p>
	</div>

	<div id="loading" class="loading">
		Loading designs data...
	</div>

	<div id="error" class="error" style="display: none;"></div>

	<div id="content" style="display: none;">
		<div class="stats">
			<div class="stat-card">
				<div class="stat-number" id="total-designs">0</div>
				<div class="stat-label">Total Designs</div>
			</div>
			<div class="stat-card">
				<div class="stat-number" id="total-categories">0</div>
				<div class="stat-label">Categories</div>
			</div>
			<div class="stat-card">
				<div class="stat-number" id="valid-images">0</div>
				<div class="stat-label">Valid Images</div>
			</div>
			<div class="stat-card">
				<div class="stat-number" id="generation-date">-</div>
				<div class="stat-label">Generated</div>
			</div>
		</div>

		<div class="categories">
			<h3>üìÇ Categories</h3>
			<div id="categories-list"></div>
		</div>

		<div>
			<h3>üñºÔ∏è Design Samples (First 12)</h3>
			<div class="designs-grid" id="designs-grid"></div>
		</div>
	</div>

	<script>
		async function loadAndTestData() {
			try {
				console.log('Loading designs data...');
				const response = await fetch('./data/designs-from-websites-list.json');

				if (!response.ok) {
					throw new Error(`Failed to load data: ${response.status} ${response.statusText}`);
				}

				const data = await response.json();
				console.log('Data loaded successfully:', data);

				// Hide loading, show content
				document.getElementById('loading').style.display = 'none';
				document.getElementById('content').style.display = 'block';

				// Update stats
				document.getElementById('total-designs').textContent = data.designs.length;
				document.getElementById('total-categories').textContent = data.metadata.categories.length;

				// Format generation date
				const genDate = new Date(data.metadata.generatedAt);
				document.getElementById('generation-date').textContent = genDate.toLocaleDateString();

				// Display categories
				const categoriesList = document.getElementById('categories-list');
				data.metadata.categories.forEach(category => {
					const tag = document.createElement('span');
					tag.className = 'category-tag';
					tag.textContent = category;
					categoriesList.appendChild(tag);
				});

				// Display first 12 designs
				const designsGrid = document.getElementById('designs-grid');
				const samplesToShow = data.designs.slice(0, 12);
				let validImageCount = 0;

				samplesToShow.forEach(design => {
					const card = document.createElement('div');
					card.className = 'design-card';

					// Create image element
					const img = document.createElement('img');
					img.className = 'design-image';
					img.alt = design.name;

					// Try to load the image
					const imagePath = `./scrape-saved-html/${design.image}`;
					img.src = imagePath;

					img.onload = () => {
						validImageCount++;
						document.getElementById('valid-images').textContent = validImageCount;
					};

					img.onerror = () => {
						img.style.display = 'none';
						const errorDiv = document.createElement('div');
						errorDiv.className = 'design-image image-error';
						errorDiv.textContent = 'üñºÔ∏è Image not found';
						card.insertBefore(errorDiv, card.firstChild);
					};

					const content = document.createElement('div');
					content.className = 'design-content';

					content.innerHTML = `
                        <div class="design-name">${design.name}</div>
                        <div class="design-description">${design.description}</div>
                        <div class="design-category">${design.category}</div>
                        <div class="design-tags">
                            ${design.tags.map(tag => `<span class="design-tag">${tag}</span>`).join('')}
                        </div>
                    `;

					card.appendChild(img);
					card.appendChild(content);
					designsGrid.appendChild(card);
				});

				console.log('‚úÖ Data test completed successfully!');
				console.log(`üìä Loaded ${data.designs.length} designs`);
				console.log(`üìÇ Categories: ${data.metadata.categories.join(', ')}`);

			} catch (error) {
				console.error('‚ùå Error loading data:', error);
				document.getElementById('loading').style.display = 'none';
				const errorDiv = document.getElementById('error');
				errorDiv.style.display = 'block';
				errorDiv.textContent = `Error loading data: ${error.message}`;
			}
		}

		// Load data when page loads
		document.addEventListener('DOMContentLoaded', loadAndTestData);
	</script>
</body>

</html>