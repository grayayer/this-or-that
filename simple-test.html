<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Simple Test</title>
</head>

<body>
	<h1>Simple Test</h1>
	<div id="output"></div>

	<script src="js/data-validator.js"></script>
	<script src="js/app-data-loader.js"></script>

	<script>
		const output = document.getElementById('output');

		function log(message) {
			output.innerHTML += '<div>' + message + '</div>';
			console.log(message);
		}

		async function test() {
			try {
				log('ğŸ” Testing DataValidator...');
				if (typeof DataValidator === 'undefined') {
					throw new Error('DataValidator not loaded');
				}
				log('âœ… DataValidator loaded');

				log('ğŸ” Testing AppDataLoader...');
				if (typeof AppDataLoader === 'undefined') {
					throw new Error('AppDataLoader not loaded');
				}
				log('âœ… AppDataLoader loaded');

				log('ğŸ” Creating AppDataLoader instance...');
				const loader = new AppDataLoader();
				log('âœ… AppDataLoader instance created');

				log('ğŸ” Checking methods...');
				log('loadDesigns method: ' + (typeof loader.loadDesigns === 'function' ? 'âœ…' : 'âŒ'));
				log('loadDesignsWithOfflineSupport method: ' + (typeof loader.loadDesignsWithOfflineSupport === 'function' ? 'âœ…' : 'âŒ'));

				if (typeof loader.loadDesignsWithOfflineSupport !== 'function') {
					log('âŒ Method missing! Available methods: ' + Object.getOwnPropertyNames(Object.getPrototypeOf(loader)).join(', '));
					return;
				}

				log('ğŸ” Testing data loading...');
				const data = await loader.loadDesignsWithOfflineSupport('data/sample-designs.json', {
					maxRetries: 1,
					onProgress: (info) => log('ğŸ“Š ' + info.message)
				});

				log('âœ… Data loaded successfully!');
				log('ğŸ“ˆ Designs count: ' + data.designs.length);

			} catch (error) {
				log('âŒ Error: ' + error.message);
				console.error('Full error:', error);
			}
		}

		document.addEventListener('DOMContentLoaded', test);
	</script>
</body>

</html>