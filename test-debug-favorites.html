<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Debug Favorites Issue</title>
	<style>
		body {
			font-family: monospace;
			padding: 20px;
			background-color: #f8f9fa;
		}

		.debug-section {
			background: white;
			padding: 20px;
			margin-bottom: 20px;
			border-radius: 8px;
			border: 1px solid #e9ecef;
		}

		pre {
			background: #f8f9fa;
			padding: 15px;
			border-radius: 4px;
			overflow-x: auto;
			white-space: pre-wrap;
		}

		button {
			padding: 8px 16px;
			margin: 5px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}

		.btn-primary {
			background: #0066cc;
			color: white;
		}
	</style>
</head>

<body>
	<h1>üîç Debug Favorites Issue</h1>

	<div class="debug-section">
		<h2>Current Favorites Data</h2>
		<button class="btn-primary" onclick="debugCurrentFavorites()">Debug Current Favorites</button>
		<pre id="debug-output">Click button to debug current favorites</pre>
	</div>

	<script src="js/favorites-manager.js"></script>
	<script>
		function debugCurrentFavorites() {
			try {
				console.log('üîç Starting favorites debug...');

				// Get current data
				const selections = FavoritesManager.getSelectionCounts();
				const hearts = FavoritesManager.getHeartBookmarks();

				console.log('üìä Selection counts:', selections);
				console.log('‚ù§Ô∏è Heart bookmarks:', hearts);

				let debugInfo = '=== FAVORITES DEBUG ===\n\n';

				debugInfo += '1. SELECTION COUNTS:\n';
				debugInfo += JSON.stringify(selections, null, 2) + '\n\n';

				debugInfo += '2. HEART BOOKMARKS:\n';
				debugInfo += JSON.stringify(hearts, null, 2) + '\n\n';

				debugInfo += '3. DESIGN METADATA:\n';
				Object.keys(selections).forEach(designId => {
					const metadata = FavoritesManager.getDesignMetadata(designId);
					debugInfo += `Design ${designId}:\n`;
					if (metadata) {
						debugInfo += `  Title: "${metadata.title}"\n`;
						debugInfo += `  URL: "${metadata.url}"\n`;
						debugInfo += `  Image: "${metadata.image}"\n`;
					} else {
						debugInfo += `  ‚ùå NO METADATA FOUND\n`;
					}
					debugInfo += '\n';
				});

				debugInfo += '4. HEART METADATA:\n';
				Object.keys(hearts).forEach(designId => {
					const heartData = hearts[designId];
					debugInfo += `Hearted Design ${designId}:\n`;
					if (heartData && heartData.designData) {
						debugInfo += `  Title: "${heartData.designData.title}"\n`;
						debugInfo += `  URL: "${heartData.designData.url}"\n`;
					} else {
						debugInfo += `  ‚ùå NO HEART DATA FOUND\n`;
					}
					debugInfo += '\n';
				});

				debugInfo += '5. TOP FAVORITES RESULT:\n';
				const topFavorites = FavoritesManager.getTopFavorites();
				topFavorites.forEach((fav, index) => {
					debugInfo += `${index + 1}. ${fav.title} (${fav.url})\n`;
					debugInfo += `   Selected: ${fav.selectionCount} times\n`;
					debugInfo += `   Hearted: ${fav.isHearted}\n`;
					debugInfo += `   Score: ${fav.score}\n\n`;
				});

				document.getElementById('debug-output').textContent = debugInfo;
				console.log('‚úÖ Debug completed');

			} catch (error) {
				console.error('‚ùå Debug error:', error);
				document.getElementById('debug-output').textContent = 'Error: ' + error.message;
			}
		}
	</script>
</body>

</html>