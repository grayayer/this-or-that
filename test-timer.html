<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Timer Test</title>
	<link rel="stylesheet" href="css/main.css">
	<style>
		body {
			padding: 40px;
			max-width: 800px;
			margin: 0 auto;
		}

		.test-controls {
			margin: 20px 0;
			display: flex;
			gap: 10px;
			flex-wrap: wrap;
		}

		.test-controls button {
			padding: 8px 16px;
			background: #0066cc;
			color: white;
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}

		.test-controls button:hover {
			background: #0052a3;
		}

		.test-info {
			margin: 20px 0;
			padding: 15px;
			background: #f8f9fa;
			border-radius: 8px;
		}
	</style>
</head>

<body>
	<h1>Timer Component Test</h1>

	<!-- Timer Section (same as main app) -->
	<section class="timer-section" id="timer-section">
		<div class="timer-container">
			<div class="timer-progress-bar" id="timer-progress-bar"></div>
			<div class="timer-display" id="timer-display">15</div>
		</div>
	</section>

	<div class="test-controls">
		<button onclick="startTimer()">Start Timer</button>
		<button onclick="stopTimer()">Stop Timer</button>
		<button onclick="resetTimer()">Reset Timer</button>
		<button onclick="pauseTimer()">Pause Timer</button>
		<button onclick="resumeTimer()">Resume Timer</button>
		<button onclick="startTimer(10)">Start 10s Timer</button>
		<button onclick="startTimer(5)">Start 5s Timer</button>
	</div>

	<div class="test-info">
		<h3>Timer State:</h3>
		<div id="timer-state">Not initialized</div>
	</div>

	<div class="test-info">
		<h3>Test Log:</h3>
		<div id="test-log"></div>
	</div>

	<script src="js/timer.js"></script>
	<script>
		// Mock loadNextPair function for testing
		function loadNextPair() {
			logMessage('🔄 loadNextPair() called - timer expired!');
			return true;
		}

		// Initialize timer with test callbacks
		initializeTimer({
			duration: 15,
			enableLogging: true,
			onTimeout: () => {
				logMessage('⏰ Timer expired!');
				loadNextPair();
			},
			onTick: (currentTime) => {
				updateStateDisplay();
			},
			onStart: () => {
				logMessage('▶️ Timer started');
			},
			onStop: () => {
				logMessage('⏹️ Timer stopped');
			},
			onReset: () => {
				logMessage('🔄 Timer reset');
			}
		});

		function updateStateDisplay() {
			const state = getTimerState();
			const stateDiv = document.getElementById('timer-state');
			stateDiv.innerHTML = `
                <strong>Duration:</strong> ${state.duration}s<br>
                <strong>Current Time:</strong> ${state.currentTime.toFixed(1)}s<br>
                <strong>Is Active:</strong> ${state.isActive}<br>
                <strong>Is Paused:</strong> ${state.isPaused}<br>
                <strong>Percentage:</strong> ${state.percentage.toFixed(1)}%<br>
                <strong>Remaining Seconds:</strong> ${state.remainingSeconds}
            `;
		}

		function logMessage(message) {
			const logDiv = document.getElementById('test-log');
			const timestamp = new Date().toLocaleTimeString();
			logDiv.innerHTML += `<div>[${timestamp}] ${message}</div>`;
			logDiv.scrollTop = logDiv.scrollHeight;
		}

		// Update state display initially
		updateStateDisplay();

		// Update state display every 100ms
		setInterval(updateStateDisplay, 100);

		logMessage('✅ Timer test page loaded');
	</script>
</body>

</html>