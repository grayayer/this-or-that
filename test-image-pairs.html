<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Test Image Pair Selection</title>
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/responsive.css">
</head>

<body>
	<main class="app-container">
		<header class="app-header">
			<h1>Test Image Pair Selection</h1>
			<p class="app-description">Testing the image pair selection and display system</p>
		</header>

		<!-- Progress Section -->
		<section class="progress-section" id="progress-section">
			<div class="progress-container">
				<div class="progress-text" id="progress-text">Choice 1 of 20+</div>
				<div class="progress-bar-container">
					<div class="progress-bar" id="progress-bar"></div>
				</div>
			</div>
		</section>

		<!-- Image Pair Selection Section -->
		<section class="selection-section" id="selection-section">
			<div class="image-pair-container">
				<div class="image-option" id="image-option-1">
					<img src="" alt="Design option 1" id="image-1" class="design-image">
					<div class="image-overlay">
						<span class="choice-label">Choose This</span>
					</div>
				</div>

				<div class="vs-divider">
					<span>or</span>
				</div>

				<div class="image-option" id="image-option-2">
					<img src="" alt="Design option 2" id="image-2" class="design-image">
					<div class="image-overlay">
						<span class="choice-label">Choose This</span>
					</div>
				</div>
			</div>
		</section>

		<!-- Loading Section -->
		<section class="loading-section" id="loading-section">
			<div class="loading-container">
				<div class="loading-spinner"></div>
				<p class="loading-text">Loading design options...</p>
			</div>
		</section>

		<!-- Error Section -->
		<section class="error-section" id="error-section" style="display: none;">
			<div class="error-container">
				<h3>Oops! Something went wrong</h3>
				<p class="error-message" id="error-message"></p>
				<button class="btn btn-primary" id="retry-btn">Try Again</button>
			</div>
		</section>

		<!-- Test Controls -->
		<section style="margin-top: 40px; text-align: center;">
			<button class="btn btn-secondary" onclick="loadNextPair()">Load Next Pair</button>
			<button class="btn btn-secondary" onclick="console.log(getAppState())">Log State</button>
		</section>
	</main>

	<!-- Scripts -->
	<script src="js/data-validator.js"></script>
	<script src="js/app-data-loader.js"></script>
	<script src="js/app.js"></script>

	<script>
		// Test initialization
		document.addEventListener('DOMContentLoaded', async function () {
			try {
				console.log('üß™ Testing image pair selection system...');

				// Initialize the app with sample data
				await initializeApp({
					dataPath: 'data/sample-designs.json',
					fallbackDataPath: 'data/sample-designs.json',
					enableLogging: true
				});

				// Initialize the image pair selection system
				initializeImagePairSystem();

				console.log('‚úÖ Test initialization complete');

			} catch (error) {
				console.error('‚ùå Test failed:', error);

				const errorSection = document.getElementById('error-section');
				const errorMessage = document.getElementById('error-message');
				const loadingSection = document.getElementById('loading-section');

				if (errorSection && errorMessage) {
					errorMessage.textContent = error.message || 'Test failed to initialize';
					errorSection.style.display = 'block';
				}

				if (loadingSection) {
					loadingSection.style.display = 'none';
				}
			}
		});

		// Set up retry button
		document.addEventListener('DOMContentLoaded', function () {
			const retryBtn = document.getElementById('retry-btn');
			if (retryBtn) {
				retryBtn.addEventListener('click', function () {
					location.reload();
				});
			}
		});
	</script>
</body>

</html>